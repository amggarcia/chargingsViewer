(this.webpackJsonpchargings=this.webpackJsonpchargings||[]).push([[0],{117:function(e,a,t){e.exports=t(156)},122:function(e,a,t){},123:function(e,a,t){},139:function(e,a){},141:function(e,a){},156:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(10),l=t.n(i),o=(t(122),t(123),t(14)),c=t(80),u=t.n(c),s=t(99),m=t(176),g=t(100),p=t(44),E=t(45),d=t(35),v=t.n(d),h=function(){function e(){Object(p.a)(this,e),this.idUsage=void 0,this.idServiceProvider=void 0,this.idExternalNumber=void 0,this.idInternalNumber=void 0,this.idNetworkOperator=void 0,this.idChargingStation=void 0,this.idEVSE=void 0,this.startTimestamp=void 0,this.stopTimestamp=void 0,this.totalDuration=void 0,this.energia_total_transacao=void 0,this.SubUsage=void 0}return Object(E.a)(e,[{key:"getStartDate",value:function(){return this.startTimestamp?v()(this.startTimestamp,"YYYYMMDDhhmmss"):null}},{key:"getEndDate",value:function(){return this.stopTimestamp?v()(this.stopTimestamp,"YYYYMMDDhhmmss"):null}}]),e}();var f=function(){function e(){Object(p.a)(this,e),this.idSubUsage=void 0,this.idDay=void 0,this.periodDuration=void 0,this.preco_opc=void 0,this.preco_unitario_opc_tempo=void 0,this.preco_unitario_opc_energia=void 0,this.preco_unitario_opc_ativacao=void 0,this.preco_opc_tempo=void 0,this.preco_opc_energia=void 0,this.preco_opc_ativacao=void 0,this.energia_total_periodo=void 0}return Object(E.a)(e,[{key:"getDay",value:function(){return this.idDay?v()(this.idDay,"YYYYMMDD"):null}}]),e}();var b=function(e){var a=Object(n.useState)([]),t=Object(o.a)(a,2),i=(t[0],t[1]),l=Object(n.useRef)(null);function c(e){return new Promise((function(a,t){var n=new g.Parser({explicitArray:!1}),r=new FileReader;r.onload=function(e){n.parseString(r.result,(function(e,t){a(t)}))},r.onerror=function(e){t(e)},r.readAsText(e)}))}function p(){return(p=Object(s.a)(u.a.mark((function a(t){var n,r;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=[],!(t.length<=0)){a.next=3;break}return a.abrupt("return");case 3:r=0;case 4:if(!(r<t.length)){a.next=10;break}return a.next=7,c(t[r]).then((function(e){n=n.concat(e.Usages.Usage)}));case 7:r++,a.next=4;break;case 10:console.log(n),(n=n.map((function(e){return Object.assign(new h,e)}))).forEach((function(e){Array.isArray(e.SubUsage)?e.SubUsage=e.SubUsage:e.SubUsage?e.SubUsage=[e.SubUsage]:e.SubUsage=[],e.SubUsage=e.SubUsage.map((function(e){return Object.assign(new f,e)}))})),i(n),e.setData(n);case 15:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement(m.a,{variant:"contained",color:"primary",onClick:function(){l&&l.current&&l.current.click()},style:{margin:"10px"}},"Load Files"),r.a.createElement("input",{type:"file",id:"file",accept:".xml",onChange:function(e){return function(e){return p.apply(this,arguments)}(e.target.files)},ref:l,multiple:!0,style:{display:"none"}}),r.a.createElement(m.a,{variant:"contained",color:"secondary",onClick:function(){l.current.value="",i([]),e.setData([])},style:{margin:"10px"}},"Clear Files"),r.a.createElement(m.a,{variant:"contained",style:{margin:"10px"},onClick:function(){return e.openAverages(!0)}},"Get averages"))},S=t(184),y=t(178),D=t(183),_=t(185),U=t(179),k=t(186),P=t(189),O=t(181),Y=t(180),j=t(182),w=t(51),x=t.n(w),B=t(52),A=t.n(B);var M=function(e){var a=e.usage,t=r.a.useState(!1),n=Object(o.a)(t,2),i=n[0],l=n[1],c=Array.isArray(a.SubUsage)?a.SubUsage:a.SubUsage?[a.SubUsage]:[];function u(e,a){return e+1*a}return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,null,r.a.createElement(U.a,null,r.a.createElement(Y.a,{"aria-label":"expand row",size:"small",onClick:function(){return l(!i)}},i?r.a.createElement(x.a,null):r.a.createElement(A.a,null))),r.a.createElement(U.a,null,a.idUsage),r.a.createElement(U.a,{align:"right"},a.idServiceProvider),r.a.createElement(U.a,{align:"right"},a.idChargingStation),r.a.createElement(U.a,{align:"right"},a.getStartDate().format("YYYY-MM-DD HH24:mm:ss")),r.a.createElement(U.a,{align:"right"},a.getEndDate().format("YYYY-MM-DD HH24:mm:ss")),r.a.createElement(U.a,{align:"right"},a.energia_total_transacao),r.a.createElement(U.a,{align:"right"},a.totalDuration),r.a.createElement(U.a,{align:"right"},c?c.map((function(e){return e.preco_opc})).reduce(u,0):0)),r.a.createElement(y.a,null,r.a.createElement(U.a,{style:{paddingBottom:0,paddingTop:0},colSpan:9},r.a.createElement(O.a,{in:i,timeout:"auto",unmountOnExit:!0},r.a.createElement(P.a,{margin:1},r.a.createElement(j.a,{variant:"h6",gutterBottom:!0,component:"div"},"SubUsage"),r.a.createElement(D.a,{size:"small","aria-label":"purchases"},r.a.createElement(S.a,null,r.a.createElement(y.a,null,r.a.createElement(U.a,null,"ID"),r.a.createElement(U.a,null,"Date"),r.a.createElement(U.a,null,"kW h"),r.a.createElement(U.a,null,"Duration"),r.a.createElement(U.a,{align:"right"},"Price"))),r.a.createElement(_.a,null,c.map((function(e){return r.a.createElement(y.a,{key:e.idSubUsage},r.a.createElement(U.a,null,e.idSubUsage),r.a.createElement(U.a,null,e.getDay().format("YYYY-MM-DD")),r.a.createElement(U.a,null,e.energia_total_periodo),r.a.createElement(U.a,null,e.periodDuration),r.a.createElement(U.a,{align:"right"},e.preco_opc))})))))))))},C=t(187),T=t(15);function I(e,a){return Math.round(e*Math.pow(10,a)+Number.EPSILON)/Math.pow(10,a)}var N,F=function(e){var a=e.average,t=(e.averageType,r.a.useState(!1)),n=Object(o.a)(t,2),i=n[0],l=n[1],c=Array.isArray(a.SubUsages)?a.SubUsages:a.SubUsages?[a.SubUsages]:[];return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,null,r.a.createElement(U.a,null,r.a.createElement(Y.a,{"aria-label":"expand row",size:"small",onClick:function(){return l(!i)}},i?r.a.createElement(x.a,null):r.a.createElement(A.a,null))),r.a.createElement(U.a,null,a.AverageTypeIdentifier),r.a.createElement(U.a,null,a.Energy),r.a.createElement(U.a,null,a.Duration),r.a.createElement(U.a,null,a.Price),r.a.createElement(U.a,null,c.length)),r.a.createElement(y.a,null,r.a.createElement(U.a,{style:{paddingBottom:0,paddingTop:0},colSpan:5},r.a.createElement(O.a,{in:i,timeout:"auto",unmountOnExit:!0},r.a.createElement(P.a,{margin:1},r.a.createElement(j.a,{variant:"h6",gutterBottom:!0,component:"div"},"SubUsage"),r.a.createElement(D.a,{size:"small","aria-label":"purchases"},r.a.createElement(S.a,null,r.a.createElement(y.a,null,r.a.createElement(U.a,null,"ID"),r.a.createElement(U.a,null,"kW h"),r.a.createElement(U.a,null,"Duration"),r.a.createElement(U.a,{align:"right"},"Price"))),r.a.createElement(_.a,null,c.map((function(e){return r.a.createElement(y.a,{key:e.idSubUsage},r.a.createElement(U.a,null,e.idSubUsage),r.a.createElement(U.a,null,e.energia_total_periodo),r.a.createElement(U.a,null,e.periodDuration),r.a.createElement(U.a,{align:"right"},e.preco_opc))})))))))))};!function(e){e.Provider="Provider",e.Station="Station"}(N||(N={}));var W=function(e){var a=Object(n.useState)(N.Provider),t=Object(o.a)(a,2),i=t[0],l=t[1],c=Object(n.useState)(d(T.groupBy(e.usages,(function(e){return e.idServiceProvider})),N.Provider)),u=Object(o.a)(c,2),s=u[0],g=u[1];function p(e){if(e.SubUsage.length<=0)return[];var a=[];return Array.isArray(e.SubUsage)?a=e.SubUsage.concat(a):e.SubUsage&&a.push(e.SubUsage),a}function E(a){l(a);var t=[];if(e.usages.length>0)switch(a){case N.Station:t=d(T.groupBy(e.usages,(function(e){return e.idChargingStation})),a),g(t);break;case N.Provider:t=d(T.groupBy(e.usages,(function(e){return e.idServiceProvider})),a),g(t)}}function d(e,a){console.log(e);var t=[];return Object.keys(e).forEach((function(n){var r={};r.AverageTypeIdentifier=n,r.Duration=0,r.Price=0,r.Energy=0,r.SubUsages=[],e[n].forEach((function(e){var a=p(e);r.Duration+=T.sumBy(a,(function(e){return 1*e.periodDuration})),r.Price+=T.sumBy(a,(function(e){return 1*e.preco_opc})),r.Energy+=T.sumBy(a,(function(e){return 1*e.energia_total_periodo}))})),r.Duration=I(r.Duration,3),r.Price=I(r.Price,2),r.Energy=I(r.Energy,3),r.SubUsages=function(e,a){var t=[];if(e.length>0){switch(a){case N.Station:t=v(T.groupBy(e,(function(e){return e.idServiceProvider})));break;case N.Provider:t=v(T.groupBy(e,(function(e){return e.idChargingStation})))}return t}}(e[n],a),t.push(r)})),t}function v(e){var a=[];return Object.keys(e).forEach((function(t){var n={};n.idSubUsage=t,n.energia_total_periodo=0,n.periodDuration=0,n.preco_opc=0,e[t].forEach((function(e){var a=p(e);n.periodDuration+=T.sumBy(a,(function(e){return 1*e.periodDuration})),n.preco_opc+=T.sumBy(a,(function(e){return 1*e.preco_opc})),n.energia_total_periodo+=T.sumBy(a,(function(e){return 1*e.energia_total_periodo}))})),n.periodDuration=I(n.periodDuration,3),n.preco_opc=I(n.preco_opc,2),n.energia_total_periodo=I(n.energia_total_periodo,3),a.push(n)})),a}return r.a.createElement("div",null,r.a.createElement(m.a,{variant:"contained",onClick:function(){return E(N.Provider)},style:{margin:"10px"}}," ","By Provider"),r.a.createElement(m.a,{variant:"contained",onClick:function(){return E(N.Station)},style:{margin:"10px"}}," ","By Station"),r.a.createElement(k.a,{component:C.a},r.a.createElement(D.a,{"aria-label":"collapsible table"},r.a.createElement(S.a,null,r.a.createElement(y.a,null,r.a.createElement(U.a,null),r.a.createElement(U.a,null,i),r.a.createElement(U.a,null,"kW h"),r.a.createElement(U.a,null,"Duration"),r.a.createElement(U.a,null,"Price"),r.a.createElement(U.a,null,"Count")),r.a.createElement(y.a,null,r.a.createElement(U.a,null,"Totals"),r.a.createElement(U.a,null),r.a.createElement(U.a,null,I(s.reduce((function(e,a){return e+a.Energy}),0),3)),r.a.createElement(U.a,null,I(s.reduce((function(e,a){return e+a.Duration}),0),3)),r.a.createElement(U.a,null,I(s.reduce((function(e,a){return e+a.Price}),0),2)),r.a.createElement(U.a,null,I(s.reduce((function(e,a){return e+a.SubUsages.length}),0),2)))),r.a.createElement(_.a,null,s.map((function(e){return r.a.createElement(F,{average:e,averageType:i})}))))))},z=t(190);var H=function(){var e=Object(n.useState)([]),a=Object(o.a)(e,2),t=a[0],i=a[1],l=Object(n.useState)(!1),c=Object(o.a)(l,2),u=c[0],s=c[1];return r.a.createElement("div",null,r.a.createElement(z.a,{open:u,onClose:function(){return s(!1)}},r.a.createElement(W,{usages:t})),r.a.createElement(b,{setData:i,openAverages:s}),r.a.createElement(k.a,{component:C.a},r.a.createElement(D.a,{"aria-label":"collapsible table"},r.a.createElement(S.a,null,r.a.createElement(y.a,null,r.a.createElement(U.a,null),r.a.createElement(U.a,null,"ID"),r.a.createElement(U.a,null,"Provider"),r.a.createElement(U.a,null,"Station"),r.a.createElement(U.a,null,"Start"),r.a.createElement(U.a,null,"Finish"),r.a.createElement(U.a,null,"kW h"),r.a.createElement(U.a,null,"Duration"),r.a.createElement(U.a,null,"Price"))),r.a.createElement(_.a,null,t.map((function(e){return r.a.createElement(M,{key:e.idUsage,usage:e})}))))))};var J=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(H,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[117,1,2]]]);
//# sourceMappingURL=main.a1688044.chunk.js.map