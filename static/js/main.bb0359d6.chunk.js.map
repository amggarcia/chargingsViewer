{"version":3,"sources":["types/Usage.tsx","types/SubUsage.tsx","components/FileLoader.tsx","components/UsageRow.tsx","components/AveragesViewer.tsx","helpers/roundingHelper.tsx","components/FileViewer.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["Usage","idUsage","idServiceProvider","idExternalNumber","idInternalNumber","idNetworkOperator","idChargingStation","idEVSE","startTimestamp","stopTimestamp","totalDuration","energia_total_transacao","SubUsage","this","moment","idSubUsage","idDay","periodDuration","preco_opc","preco_unitario_opc_tempo","preco_unitario_opc_energia","preco_unitario_opc_ativacao","preco_opc_tempo","preco_opc_energia","preco_opc_ativacao","energia_total_periodo","FileLoader","props","useState","setData","fileInput","useRef","parseFile","file","Promise","resolve","reject","parser","Parser","explicitArray","reader","FileReader","onload","evt","parseString","result","err","onerror","readAsText","files","a","tempData","length","i","then","concat","Usages","console","log","map","item","Object","assign","forEach","Array","isArray","x","Button","variant","color","onClick","current","click","style","margin","type","id","accept","onChange","e","loadXMLFile","target","ref","multiple","display","value","openAverages","UsageRow","AverageType","usage","React","open","setOpen","subUsages","getSum","total","num","Fragment","TableRow","TableCell","IconButton","aria-label","size","align","getStartDate","format","getEndDate","reduce","paddingBottom","paddingTop","colSpan","Collapse","in","timeout","unmountOnExit","Box","Typography","gutterBottom","component","Table","TableHead","TableBody","subUsage","key","getDay","roundAccurately","number","decimalPlaces","Math","round","pow","Number","EPSILON","AveragesViewer","Provider","averageType","setAverageType","calcAverages","_","usages","averages","setAverages","changeType","newAverages","Station","grouped","calcedAverages","keys","newAverage","AverageTypeIdentifier","Duration","Price","Energy","push","getSubUsages","TableContainer","Paper","average","FileViewer","data","modalOpen","setModalOpen","Dialog","onClose","App","className","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.bb0359d6.chunk.js","sourcesContent":["import moment from \"moment\";\r\nimport SubUsage from \"./SubUsage\";\r\n\r\nexport class Usage {\r\n  idUsage: string;\r\n  idServiceProvider: string;\r\n  idExternalNumber: string;\r\n  idInternalNumber: string;\r\n  idNetworkOperator: string;\r\n  idChargingStation: string;\r\n  idEVSE: string;\r\n  startTimestamp: string;\r\n  getStartDate() {\r\n    if (this.startTimestamp)\r\n      return moment(this.startTimestamp, \"YYYYMMDDhhmmss\");\r\n    else return null;\r\n  }\r\n  stopTimestamp: string;\r\n  getEndDate() {\r\n    if (this.stopTimestamp) return moment(this.stopTimestamp, \"YYYYMMDDhhmmss\");\r\n    else return null;\r\n  }\r\n  totalDuration: number;\r\n  energia_total_transacao: number;\r\n  SubUsage: SubUsage[];\r\n}\r\n\r\nexport function getSubUsages(usage: Usage) {\r\n  if (usage.SubUsage.length <= 0) return [] as SubUsage[];\r\n  var subUsages: SubUsage[] = [] as SubUsage[];\r\n\r\n  if (Array.isArray(usage.SubUsage))\r\n    subUsages = usage.SubUsage.concat(subUsages);\r\n  else if (usage.SubUsage) subUsages.push(usage.SubUsage);\r\n  return subUsages;\r\n}\r\n","import moment from 'moment'\r\n\r\nexport default class SubUsage {\r\n    idSubUsage: string\r\n    idDay: string\r\n    public getDay() {\r\n        if (this.idDay)\r\n            return moment(this.idDay, 'YYYYMMDD');\r\n        else\r\n            return null;\r\n    }\r\n    periodDuration: number\r\n    preco_opc: number\r\n    preco_unitario_opc_tempo: number\r\n    preco_unitario_opc_energia: number\r\n    preco_unitario_opc_ativacao: number\r\n    preco_opc_tempo: number\r\n    preco_opc_energia: number\r\n    preco_opc_ativacao: number\r\n    energia_total_periodo: number\r\n}","import React, { useState, useRef } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { Parser } from \"xml2js\";\r\nimport { Usage } from \"../types/Usage\";\r\nimport SubUsage from \"../types/SubUsage\";\r\n\r\ninterface props {\r\n  setData: Function;\r\n  openAverages: Function;\r\n}\r\n\r\nfunction FileLoader(props: props) {\r\n  const [loadedUsages, setData] = useState([] as Usage[]);\r\n  const fileInput = useRef(null);\r\n  function onButtonClick() {\r\n    if (fileInput && fileInput.current) fileInput.current.click();\r\n  }\r\n\r\n  function clearFiles() {\r\n    fileInput.current.value = \"\";\r\n    setData([] as Usage[]);\r\n    props.setData([] as Usage[]);\r\n  }\r\n\r\n  function parseFile(file: File): Promise<any> {\r\n    return new Promise((resolve, reject) => {\r\n      var parser = new Parser({ explicitArray: false });\r\n      var reader = new FileReader();\r\n\r\n      reader.onload = function (evt: any) {\r\n        parser.parseString(reader.result, function (err: any, result: any) {\r\n          resolve(result);\r\n        });\r\n      };\r\n      reader.onerror = function (evt: any) {\r\n        reject(evt);\r\n      };\r\n      reader.readAsText(file);\r\n    });\r\n  }\r\n\r\n  async function loadXMLFile(files: FileList) {\r\n    var tempData: Usage[] = [];\r\n\r\n    if (files.length <= 0) return;\r\n    for (var i = 0; i < files.length; i++) {\r\n      await parseFile(files[i]).then((result) => {\r\n        //Very hammer much wow\r\n        tempData = tempData.concat(result.Usages.Usage);\r\n      });\r\n    }\r\n\r\n    console.log(tempData);\r\n    tempData = tempData.map((item) => {\r\n      return Object.assign(new Usage(), item);\r\n    });\r\n    tempData.forEach((item) => {\r\n      if (Array.isArray(item.SubUsage)) item.SubUsage = item.SubUsage;\r\n      else if (item.SubUsage) item.SubUsage = [item.SubUsage];\r\n      else item.SubUsage = [];\r\n\r\n      item.SubUsage = item.SubUsage.map((x) => {\r\n        return Object.assign(new SubUsage(), x);\r\n      });\r\n    });\r\n    setData(tempData);\r\n    props.setData(tempData);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={onButtonClick}\r\n        style={{ margin: \"10px\" }}\r\n      >\r\n        Load Files\r\n      </Button>\r\n      <input\r\n        type=\"file\"\r\n        id=\"file\"\r\n        accept=\".xml\"\r\n        onChange={(e) => loadXMLFile(e.target.files)}\r\n        ref={fileInput}\r\n        multiple\r\n        style={{ display: \"none\" }}\r\n      />\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"secondary\"\r\n        onClick={clearFiles}\r\n        style={{ margin: \"10px\" }}\r\n      >\r\n        Clear Files\r\n      </Button>\r\n      <Button\r\n        variant=\"contained\"\r\n        style={{ margin: \"10px\" }}\r\n        onClick={() => props.openAverages(true)}\r\n      >\r\n        Get averages\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FileLoader;\r\n","import React from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Collapse from \"@material-ui/core/Collapse\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport KeyboardArrowUpIcon from \"@material-ui/icons/KeyboardArrowUp\";\r\nimport KeyboardArrowDownIcon from \"@material-ui/icons/KeyboardArrowDown\";\r\nimport { Usage } from \"../types/Usage\";\r\nimport SubUsage from \"../types/SubUsage\";\r\n\r\ninterface UsageRowProps {\r\n  usage: Usage;\r\n}\r\n\r\nfunction UsageRow(props: UsageRowProps) {\r\n  const { usage } = props;\r\n  const [open, setOpen] = React.useState(false);\r\n  const subUsages = getSubUsages();\r\n\r\n  function getSubUsages() {\r\n    if (Array.isArray(usage.SubUsage)) return usage.SubUsage;\r\n    else if (usage.SubUsage) return [usage.SubUsage];\r\n    else return [];\r\n  }\r\n\r\n  function getSum(total: number, num: number) {\r\n    return total + num * 1;\r\n  }\r\n  function getPriceOpc(): number {\r\n    if (!subUsages) return 0;\r\n    const pricesOPC: number[] = subUsages.map((item) => {\r\n      return item.preco_opc as number;\r\n    });\r\n    const result: number = pricesOPC.reduce(getSum, 0);\r\n    return result;\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <TableRow>\r\n        <TableCell>\r\n          <IconButton\r\n            aria-label=\"expand row\"\r\n            size=\"small\"\r\n            onClick={() => setOpen(!open)}\r\n          >\r\n            {open ? <KeyboardArrowUpIcon /> : <KeyboardArrowDownIcon />}\r\n          </IconButton>\r\n        </TableCell>\r\n        <TableCell>{usage.idUsage}</TableCell>\r\n        <TableCell align=\"right\">{usage.idServiceProvider}</TableCell>\r\n        <TableCell align=\"right\">{usage.idChargingStation}</TableCell>\r\n        <TableCell align=\"right\">\r\n          {usage.getStartDate().format(\"YYYY-MM-DD HH24:mm:ss\")}\r\n        </TableCell>\r\n        <TableCell align=\"right\">\r\n          {usage.getEndDate().format(\"YYYY-MM-DD HH24:mm:ss\")}\r\n        </TableCell>\r\n        <TableCell align=\"right\">{usage.energia_total_transacao}</TableCell>\r\n        <TableCell align=\"right\">{usage.totalDuration}</TableCell>\r\n        <TableCell align=\"right\">{getPriceOpc()}</TableCell>\r\n      </TableRow>\r\n      <TableRow>\r\n        <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={9}>\r\n          <Collapse in={open} timeout=\"auto\" unmountOnExit>\r\n            <Box margin={1}>\r\n              <Typography variant=\"h6\" gutterBottom component=\"div\">\r\n                SubUsage\r\n              </Typography>\r\n              <Table size=\"small\" aria-label=\"purchases\">\r\n                <TableHead>\r\n                  <TableRow>\r\n                    <TableCell>ID</TableCell>\r\n                    <TableCell>Date</TableCell>\r\n                    <TableCell>kW h</TableCell>\r\n                    <TableCell>Duration</TableCell>\r\n                    <TableCell align=\"right\">Price</TableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  {subUsages.map((subUsage: SubUsage) => (\r\n                    <TableRow key={subUsage.idSubUsage}>\r\n                      <TableCell>{subUsage.idSubUsage}</TableCell>\r\n                      <TableCell>\r\n                        {subUsage.getDay().format(\"YYYY-MM-DD\")}\r\n                      </TableCell>\r\n                      <TableCell>{subUsage.energia_total_periodo}</TableCell>\r\n                      <TableCell>{subUsage.periodDuration}</TableCell>\r\n                      <TableCell align=\"right\">{subUsage.preco_opc}</TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                </TableBody>\r\n              </Table>\r\n            </Box>\r\n          </Collapse>\r\n        </TableCell>\r\n      </TableRow>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default UsageRow;\r\n","import React, { useState } from \"react\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { Usage } from \"../types/Usage\";\r\nimport SubUsage from \"../types/SubUsage\";\r\nimport * as _ from \"lodash\";\r\nimport { roundAccurately } from \"../helpers/roundingHelper\";\r\n\r\ninterface AveragesViewerProps {\r\n  usages: Usage[];\r\n}\r\nenum AverageType {\r\n  Provider = \"Provider\",\r\n  Station = \"Station\",\r\n}\r\n\r\ninterface Average {\r\n  AverageTypeIdentifier: string;\r\n  Duration: number;\r\n  Price: number;\r\n  Energy: number;\r\n}\r\n\r\nfunction AveragesViewer(props: AveragesViewerProps) {\r\n  const [averageType, setAverageType] = useState(AverageType.Provider);\r\n  const [averages, setAverages] = useState(\r\n    calcAverages(_.groupBy(props.usages, (x) => x.idServiceProvider))\r\n  );\r\n\r\n  function getSubUsages(usage: Usage) {\r\n    if (usage.SubUsage.length <= 0) return [] as SubUsage[];\r\n    var subUsages: SubUsage[] = [] as SubUsage[];\r\n\r\n    if (Array.isArray(usage.SubUsage))\r\n      subUsages = usage.SubUsage.concat(subUsages);\r\n    else if (usage.SubUsage) subUsages.push(usage.SubUsage);\r\n    return subUsages;\r\n  }\r\n\r\n  function changeType(type: AverageType) {\r\n    setAverageType(type);\r\n    var newAverages = [] as Average[];\r\n    if (props.usages.length > 0) {\r\n      switch (type) {\r\n        case AverageType.Station:\r\n          newAverages = calcAverages(\r\n            _.groupBy(props.usages, (x) => x.idChargingStation)\r\n          );\r\n          setAverages(newAverages);\r\n          break;\r\n        case AverageType.Provider:\r\n          newAverages = calcAverages(\r\n            _.groupBy(props.usages, (x) => x.idServiceProvider)\r\n          );\r\n          setAverages(newAverages);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n  }\r\n  function calcAverages(grouped: _.Dictionary<Usage[]>): Average[] {\r\n    console.log(grouped);\r\n    var calcedAverages = [] as Average[];\r\n    Object.keys(grouped).forEach((x) => {\r\n      var newAverage = {} as Average;\r\n      newAverage.AverageTypeIdentifier = x;\r\n      newAverage.Duration = 0;\r\n      newAverage.Price = 0;\r\n      newAverage.Energy = 0;\r\n      grouped[x].forEach((usage) => {\r\n        const subUsages = getSubUsages(usage);\r\n        newAverage.Duration += _.sumBy(subUsages, (x) => x.periodDuration * 1);\r\n        newAverage.Price += _.sumBy(subUsages, (x) => x.preco_opc * 1);\r\n        newAverage.Energy += _.sumBy(\r\n          subUsages,\r\n          (x) => x.energia_total_periodo * 1\r\n        );\r\n      });\r\n      newAverage.Duration = roundAccurately(newAverage.Duration, 3);\r\n      newAverage.Price = roundAccurately(newAverage.Price, 2);\r\n      newAverage.Energy = roundAccurately(newAverage.Energy, 3);\r\n      calcedAverages.push(newAverage);\r\n    });\r\n    return calcedAverages;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        variant=\"contained\"\r\n        onClick={() => changeType(AverageType.Provider)}\r\n        style={{ margin: \"10px\" }}\r\n      >\r\n        {\" \"}\r\n        By Provider\r\n      </Button>\r\n      <Button\r\n        variant=\"contained\"\r\n        onClick={() => changeType(AverageType.Station)}\r\n        style={{ margin: \"10px\" }}\r\n      >\r\n        {\" \"}\r\n        By Station\r\n      </Button>\r\n      <TableContainer component={Paper}>\r\n        <Table aria-label=\"collapsible table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>{averageType}</TableCell>\r\n              <TableCell>kW h</TableCell>\r\n              <TableCell>Duration</TableCell>\r\n              <TableCell>Price</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {averages.map((average: Average) => (\r\n              <TableRow>\r\n                <TableCell>{average.AverageTypeIdentifier}</TableCell>\r\n                <TableCell>{average.Energy}</TableCell>\r\n                <TableCell>{average.Duration}</TableCell>\r\n                <TableCell>{average.Price}</TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AveragesViewer;\r\n","export function roundAccurately(number: number, decimalPlaces: number): number {\r\n\r\n    return Math.round(number * Math.pow(10, decimalPlaces) + Number.EPSILON) / Math.pow(10, decimalPlaces);\r\n    //return Number(Math.round(number + Number.EPSILON + decimalPlaces) + Number.EPSILON + (decimalPlaces * -1))\r\n}","import React, { useState } from 'react';\r\nimport FileLoader from './FileLoader'\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport UsageRow from './UsageRow'\r\nimport Paper from '@material-ui/core/Paper';\r\nimport AveragesViewer from './AveragesViewer';\r\nimport Dialog from '@material-ui/core/Dialog';\r\n\r\ninterface test {\r\n    cenas: string\r\n}\r\n\r\n\r\nfunction FileViewer() {\r\n    const [data, setData] = useState([] as any[]);\r\n    const [modalOpen, setModalOpen] = useState(false);\r\n    return (\r\n        <div>\r\n\r\n            <Dialog\r\n                open={modalOpen}\r\n                onClose={() => setModalOpen(false)}\r\n            >\r\n                <AveragesViewer usages={data}></AveragesViewer>\r\n            </Dialog>\r\n            <FileLoader setData={setData} openAverages={setModalOpen}></FileLoader>\r\n            <TableContainer component={Paper}>\r\n                <Table aria-label=\"collapsible table\">\r\n                    <TableHead>\r\n                        <TableRow>\r\n                            <TableCell></TableCell>\r\n                            <TableCell>ID</TableCell>\r\n                            <TableCell >Provider</TableCell>\r\n                            <TableCell >Station</TableCell>\r\n                            <TableCell >Start</TableCell>\r\n                            <TableCell >Finish</TableCell>\r\n                            <TableCell>kW h</TableCell>\r\n                            <TableCell>Duration</TableCell>\r\n                            <TableCell>Price</TableCell>\r\n                        </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                        {data.map((usage) => (\r\n                            <UsageRow key={usage.idUsage} usage={usage} />\r\n                        ))}\r\n                    </TableBody>\r\n                </Table>\r\n            </TableContainer>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FileViewer;\r\n\r\n","import React from 'react';\r\nimport './App.css';\r\nimport FileViewer from './components/FileViewer'\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"App-header\">\r\n        <FileViewer></FileViewer>\r\n      </header>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}